PUNTOS	EQU 128
RAM	EQU $10000
SEQS	EQU RAM/(PUNTOS*4)
BASE	EQU $F8000
	pea 0
	move.w #$20,-(a7)
	trap #1
	lea $2000,a7
	*BSR CLS
	BSR PREP
	MOVEM.L $FFFF8240.W,D0-D7
	MOVEM.L D0-D7,OLDCO
ME	MOVE.W #SEQS-1,D7
D7LOP	move.w #$25,-(a7)
	trap #14
	lea 2(A7),a7
	MOVE.L #$0000333,$FFFF8240.W
	MOVE.L #$5550555,$FFFF8244.W
	BSR SPACE
	CMP.B #$39,$FFFFFC02.W
	BEQ.S GOGO
	DBF D7,D7LOP
	MOVE.L #SPAC,SPCONT
	BRA.S ME
GOGO	MOVEM.L OLDCO(PC),D0-D7
	MOVEM.L D0-D7,$FFFF8240.W
	PEA 0
	TRAP #1
SPACE	MOVEA.L SPCONT(PC),A0
	LEA BASE,A1
	MOVEQ #0,D2
	MOVEA.L OLDP(PC),A2
	REPT PUNTOS
	MOVE.W (A2),D1
	MOVE.W D2,0(A1,D1.W)
	ADDQ.L #4,A2
	ENDR
	ADD.L #4*PUNTOS,SPCONT
	MOVE.L A0,OLDP
	REPT PUNTOS
	MOVE.W (A0)+,D1
	MOVE.W 0(A1,D1.W),D2
	OR.W (A0)+,D2
	MOVE.W D2,0(A1,D1.W)
	ENDR
	RTS
OLDP	DC.L SPAC
SPCONT	DC.L SPAC
PREP	LEA SPAC(PC),A0
	MOVE.W #(SEQS*PUNTOS)-1,D0
DFLO	MOVEQ #0,D2
	MOVEQ #16-1,D1
	SUB.W 2(A0),D1
	BSET D1,D2
	MOVE.W D2,2(A0)
	ADDQ.L #4,A0
	DBF D0,DFLO
	RTS
OLDCO	DS.W 16
SPAC	INCBIN 'SPACE1.DAT'	

