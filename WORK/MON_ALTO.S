START:
 * SI NO PULSAS NADA SE VA
 * SI PULSAS 1 MONST2
 * SI PULSAS 2 MONST2 CON PANATALLA EN $78000
 MOVE.L #$600FF,-(A7)
 TRAP #1
 LEA 4(A7),A7
 CMP.W #'1',D0
 BEQ SAT
 CMP.W #'2',D0
 BEQ ST
 CLR.L -(A7)
 TRAP #1
ST
 MOVE.W #-1,-(A7)
 PEA $78000
 PEA $78000
 MOVE.W #5,-(A7)
 TRAP #14
 LEA 12(A7),A7
SAT
 LEA FIN,A7 
 MOVE.L #$E0000-$D204,-(SP); E0000+D204=DIRECCION INICIAL MONST2
 MOVE.L #START-256,-(SP)
 CLR.W -(SP)
 MOVE.W #$4A,-(SP)
 TRAP #1
 ADD.L #12,SP
 PEA HANDLE(PC)
 PEA HANDLE(PC)
 PEA FILE(PC)
 MOVE.W #3,-(SP)
 MOVE.W #$4B,-(SP)
 TRAP #1
 ADD.L #16,SP
 MOVE.L D0,D7
 PEA START-256
 MOVE.W #$49,-(SP)
 TRAP #1
** 'INSTALA' RUTINAS PARA SALVAR REGISTROS 
** Y POSICIONES
POS	EQU $80000 
	LEA SET_ALL(PC),A0
	LEA POS,A1
	LEA F_DATA(PC),A2
ASDA	MOVE.L (A0)+,(A1)+
	CMPA.L A0,A2
	BGT ASDA
 ADDQ.L #6,SP
 MOVE.L D7,-(SP)
 MOVE.L D7,-(SP)
 MOVE.L D7,-(SP)
 MOVE.W #4,-(SP)
 MOVE.W #$4B,-(SP)
 TRAP #1
 ADD.L #16,SP
 CLR.W -(SP)
 TRAP #1
HANDLE:
 DS.L 1
SET_ALL	MOVE.L $118.W,OLD118-SET_ALL+POS
	MOVE.B $FFFFFA07.W,OLD7-SET_ALL+POS
	MOVE.B $FFFFFA09.W,OLD9-SET_ALL+POS
	MOVE.B $FFFFFA13.W,OLD13-SET_ALL+POS
	MOVE.B $FFFFFA15.W,OLD15-SET_ALL+POS
	MOVE.B $FFFFFA17.W,OLD17-SET_ALL+POS
	MOVE.L $70.W,OLD70-SET_ALL+POS
	RTS
GET_ALL	MOVE.L OLD118(PC),$118.W
	MOVE.B OLD7(PC),$FFFFFA07.W
	MOVE.B OLD9(PC),$FFFFFA07.W
	MOVE.B OLD13(PC),$FFFFFA13.W
	MOVE.B OLD15(PC),$FFFFFA15.W
	MOVE.B OLD17(PC),$FFFFFA17.W
	MOVE.L OLD70(PC),$70.W
	RTS
OLD118	DS.L 1
OLD70	DS.L 1
OLD7	DS.B 1
OLD9	DS.B 1
OLD13	DS.B 1
OLD15	DS.B 1
OLD17	DS.W 1
F_DATA
FILE:
 DC.B 'MONST2.PRG',0,0
 DS.B 256
FIN:

 