MASK1	EQU $1234
MASK2	EQU $1423
DATA	EQU $200 ;$24
INCOD	EQU $2000 ;$167A
	PEA 0
	MOVE.W #$20,-(A7)
	TRAP #1
	LEA $2000,A7
	BSR CODE
	LEA INCOD,A0
	MOVEQ #0,D0 ;
	MOVE.W #256-1,D1
SUMALOP	ADD.W (A0)+,D0
	DBF D1,SUMALOP
	MOVE.W #$1234,D0 ;
	LEA DATA,A0
	MOVE.W D0,2(A0)
	MOVE.W (A0),D1
	LSR.W #4,D1
	AND.W D1,D0
	LSL.W #8,D0
	MOVE.W #$400,D0 ;
	EOR.W #$1000,D0
	MOVE.W A0,D1
	MOVEQ #$24,D1 ;
	MOVE.W 2(A0),D2
	MOVE.W D2,D3
	AND.W #$F,D2
	LSR.W #1,D2
	SUBQ.W #1,D2
	SUB.W D2,D1
	OR.W D1,D0
	MOVE.W 2(A0),D1
	BSR DECODE
	PEA 0
	TRAP #1
CODE	MOVE.W #MASK1,D0
	MOVE.W #MASK2,D1
	LEA PRG(PC),A0
	LEA EPRG(PC),A1
CODEON	MOVE.W (A0),D2
	ADD.W D0,D1
	EOR.W D1,D2
	MOVE.W D2,(A0)+
	CMPA.L A0,A1
	BGT.S CODEON
	RTS
DECODE	LEA PRG(PC),A0
	LEA EPRG(PC),A1
DCODEON	MOVE.W (A0),D2
	ADD.W D1,D0
	EOR.W D0,D2
	MOVE.W D2,(A0)+
	CMPA.L A0,A1
	BGT.S DCODEON
	RTS
PRG	DC.B 'HELLO THIS IS THE MAIN PRG'
EPRG