	CLR.L -(A7)
	MOVE.W #$20,-(A7)
	TRAP #1
	LEA 6(A7),A7
	BSR HBLON
MAS_P	CLR.B SYNC
SYNKER	TST.B SYNC
	BEQ.S SYNKER
	CMP.B #$39,$FFFFFC02.W
	BNE.S MAS_P
	BSR HBLOFF
	CLR.L -(A7)
	TRAP #1
HBLON	MOVE.W #$2700,SR
	MOVE.L $70.W,OLDVBL
	MOVE.L $68.W,OLDHBL
	MOVE.B $FFFFFA07.W,OLD7
	MOVE.B $FFFFFA09.W,OLD9
	MOVE.L #NVBL,$70.W
	MOVE.L #NHBL,$68.W
	MOVE.W #$2100,SR
	RTS
HBLOFF	MOVE.W #$2700,SR
	MOVE.L OLDVBL,$70.W
	MOVE.L OLDHBL,$68.W
	MOVE.B OLD7,$FFFFFA07.W
	MOVE.B OLD9,$FFFFFA09.W
	CLR.B $FFFFFA07.W
	CLR.B $FFFFFA09.W
	MOVE.W #$2300,SR
	RTS
NHBL	RTE
NVBL	ST.B SYNC
	MOVEM.L D0-D7/A0-A6,-(A7)
	LEA COLORS,A0
	LEA $FFFF8240.W,A1
	MOVEM.W (A0)+,D0-D7
	REPT 50
	STOP #$2100
	MOVE.W D0,(A1)
	MOVE.W D1,(A1)
	MOVE.W D2,(A1)
	MOVE.W D3,(A1)
	MOVE.W D4,(A1)
	MOVE.W D5,(A1)
	MOVE.W D6,(A1)
	MOVE.W D7,(A1)
	ENDR
	MOVEM.L (A7)+,D0-D7/A0-A6
	RTE
SYNC	DC.W 1
OLDVBL	DS.L 1
OLDHBL	DS.L 1
OLD7	DS.B 1
OLD9	DS.B 1
COLORS	DC.W $777,$666,$555,$455,$565,$575,$566,$777

	
	
	 